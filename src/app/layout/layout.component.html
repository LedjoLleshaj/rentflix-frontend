<mat-sidenav-container>
  <mat-sidenav
    class='rf-sidenav'
    #rfnav
    [mode]="mobileQuery.matches ? 'over' : 'side'"
    [style.width]='mobileQuery.matches ? "215px" : "250px"'
    role='region'
    fixedInViewport='true'>
    <div class='rf-d-flex rf-justify-end' *ngIf='mobileQuery.matches'>
      <button mat-icon-button aria-label='Close sidenav' (click)='rfnav.toggle()'>
        <mat-icon>close</mat-icon>
      </button>
    </div>

    <div class='rf-avatar-container'>
      <i class='material-icons'>account_circle</i>
      <div class='mat-typography'>
        <p class='rf-m-0 mat-headline-6'>{{ username }}</p>
        <p class='rf-m-0 mat-body-2'>{{ firstName }} {{ lastName }}</p>
      </div>
    </div>
    <mat-divider></mat-divider>
    <mat-nav-list>
      <button mat-list-item
              aria-label='Open movies view'
              [activated]="this.router.url==='/'"
              (click)='this.router.navigate([""])'
      >
        <mat-icon matListItemIcon>movies</mat-icon>
        <div matListItemTitle>Movies</div>
      </button>
      <button mat-list-item
              aria-label='Open history view'
              [activated]="this.router.url==='/history'"
              (click)='this.router.navigate(["/history"])'
      >
        <mat-icon matListItemIcon>history</mat-icon>
        <div matListItemTitle>History</div>
      </button>
    </mat-nav-list>
  </mat-sidenav>

  <mat-sidenav-content style='height: 100vh;'
                       role='main'>
    <mat-toolbar class='rf-toolbar'>
      <!-- open menu and title -->
      <div class='rf-d-flex rf-items-center'>
        <button mat-icon-button (click)='rfnav.toggle()'
                [attr.aria-label]="rfnav.opened ? 'Close sidenav' : 'Open sidenav'"
        >
          <mat-icon>menu</mat-icon>
        </button>
        <h1>Rentflix</h1>
      </div>
      <!-- dark/light mode -->
      <button (click)='toggleDarkMode()' *ngIf='darkMode' mat-stroked-button aria-label='Active light mode'>
        <mat-icon>light_mode</mat-icon>
        Light mode
      </button>
      <button (click)='toggleDarkMode()' *ngIf='!darkMode' mat-stroked-button aria-label='Active dark mode'>
        <mat-icon>dark_mode</mat-icon>
        Dark mode
      </button>
    </mat-toolbar>
    <!-- main content -->
    <div class='rf-main-content'>
      <router-outlet></router-outlet>
    </div>
    <!-- end main content -->
  </mat-sidenav-content>
</mat-sidenav-container>
